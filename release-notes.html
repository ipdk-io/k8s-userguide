<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IPDK Kubernetes Infrastructure Offload Release Notes &mdash; k8s-infra-offload 23.07 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Using TLS Certificates" href="security/using-tls-certificates.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            k8s-infra-offload
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Setup Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker-containerd-install.html">Kubernetes, Docker, and containerd Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="target-setup-dpdk.html">Target Setup for P4-DPDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="target-setup-es2k.html">Target Setup for Intel IPU E2100</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security/security-guide.html">Security Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="security/using-tls-certificates.html">Using TLS Certificates</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release notes</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">IPDK Kubernetes Infrastructure Offload Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ipdk-24-01">IPDK 24.01</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-s-new-in-this-release">What’s new in this Release</a></li>
<li class="toctree-l3"><a class="reference internal" href="#component-feature-support">Component Feature Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resolved-issues">Resolved Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#known-issues-and-limitations">Known Issues and Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ipdk-23-07">IPDK 23.07</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#highlights">Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#e2100-target">E2100 Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dpdk-target">DPDK Target</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#common-changes">Common Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#coming-attractions">Coming Attractions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-and-build-instructions">Installation and Build Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license-notices-and-disclaimers">License, Notices, and Disclaimers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#licensing">Licensing</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">k8s-infra-offload</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">IPDK Kubernetes Infrastructure Offload Release Notes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/release-notes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ipdk-kubernetes-infrastructure-offload-release-notes">
<h1>IPDK Kubernetes Infrastructure Offload Release Notes<a class="headerlink" href="#ipdk-kubernetes-infrastructure-offload-release-notes" title="Permalink to this heading"></a></h1>
<section id="ipdk-24-01">
<h2>IPDK 24.01<a class="headerlink" href="#ipdk-24-01" title="Permalink to this heading"></a></h2>
<section id="what-s-new-in-this-release">
<h3>What’s new in this Release<a class="headerlink" href="#what-s-new-in-this-release" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Service Load Balancing: Support for K8s Service of type ClusterIP.
Kubeproxy implementation is now offloaded to hardware.
Services can be created and dynamically distributed to endpoints.
For TCP, only the SYN packet goes through the load-balancing logic.
Entry is added to hardware CT table for treatment of subsequent packets.
Support for dynamic scale-up of endpoints.</p></li>
<li><p>Support for Go version 1.21.4</p></li>
<li><p>Support for log level configuration from config files for Infraagent</p></li>
<li><p>SRIOV support for E2100</p></li>
</ul>
</section>
<section id="component-feature-support">
<h3>Component Feature Support<a class="headerlink" href="#component-feature-support" title="Permalink to this heading"></a></h3>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">:header-rows: 1</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p>Feature</p></td>
<td><p>Description</p></td>
<td><p>Status</p></td>
</tr>
<tr class="row-even"><td><p>Addition of a P4 Dataplane for offload to IPU</p></td>
<td><p>Addition of InfraAgent, InfraManager components in a split grpc
mode for p4 based offloads to IPU pipeline using SDE</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-odd"><td><p>Enabling Secure gRPC</p></td>
<td><p>mTLS between Inframanager, Infraagent and Infrap4d grpc components</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-even"><td><p>Proxy Arp Support</p></td>
<td><p>Proxy ARP implementation using a dummy virtual router gateway</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-odd"><td><p>Pod to pod connectivity using vrouter</p></td>
<td><p>Each pod is connected to another pod using L3 virtual routing.
Proxy arp implementation for arp resolution.</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-even"><td><p>Support for DPDK P4 pipeline for Pod to Pod connectivity</p></td>
<td><p>A P4 DPDK pipeline for pod to pod connectivity and service load-balancing
using TAP interfaces and a P4 DPDK pipeline</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-odd"><td><p>Flow connection tracking</p></td>
<td><p>Connection tracking and NAT implementation using flow 5-tuple for Service Load Balancing.</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-even"><td><p>Support for Service type “ClusterIP” for UDP and TCP traffic</p></td>
<td><p>Support for UDP and TCP services. Fully functional DNS and Kubernetes API services.</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-odd"><td><p>Support for Device interfaces like subfunctions and native interfaces like ipvlan and Tap</p></td>
<td><p>Subfunctions for E2100; Tap for DPDK</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-even"><td><p>Execution support in Split Mode with Inframanager running on ACC</p></td>
<td><p>Inframanager running on ACC but infraagent on host</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-odd"><td><p>Automation scripts for cluster deployment</p></td>
<td><p>Example scripts for cluster deployment of Load balancing and pod scale up</p></td>
<td><p>Production ready</p></td>
</tr>
<tr class="row-even"><td><p>SRIOV interface support for E2100</p></td>
<td><p>SRIOV support for E2100 in host mode in addition to CDQ</p></td>
<td><p>Engineering preview</p></td>
</tr>
</tbody>
</table>
</section>
<section id="resolved-issues">
<h3>Resolved Issues<a class="headerlink" href="#resolved-issues" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>After deleting and creating multiple test pods, multiple times some of the pods are not
getting created, with error “failed to get a CDQ interface for pod: no free resources left” on infraagent.</p></li>
<li><p>No Readme for TLS certificates and security guide</p></li>
<li><p>Test pods are not coming to running state, as Policy related errors on inframanager</p></li>
<li><p>Infraagent is not coming to running state, with the error “Error while parsing Json file”</p></li>
<li><p>Inframanger restarts/crashes with “Panic occured, runtime error: invalid memory address or nil
pointer dereference” error on sending invalid grpc messages from Defensics for fuzz testing.</p></li>
<li><p>“/opt/p4/k8s/inframanager”: No such file or directory” error when running setup_infra.sh in split mode</p></li>
<li><p>Readme: config-manage for Docker should point to right repo supporting Rocky Linux</p></li>
<li><p>infra-manager pod not coming up due to problem in cleanup of kustomization.yaml after runnning split mode.</p></li>
<li><p>scripts/setup_infra.sh doesn’t contain right changes to make in split mode for infraagent, inframanger
and openssl conf files</p></li>
<li><p>Internal state wasn’t being retained earlier for recovery purposes.</p></li>
<li><p>Sanity checks were missing for wrong configuration in case of missing node IP.</p></li>
<li><p>“One or more write operations failed” due to duplicate rules present when inframanager was restarted.</p></li>
<li><p><cite>setup_infra.sh</cite> has infrap4d start twice in split mode.</p></li>
</ul>
</section>
<section id="known-issues-and-limitations">
<h3>Known Issues and Limitations<a class="headerlink" href="#known-issues-and-limitations" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The setup_infra.sh automation script, works with the default configuration for certificate paths
and artifact paths. Any changes in these paths will render the script unusable.
User may need to manually configure and execute instructions mentioned in the script.</p></li>
<li><p>SRIOV is an experimental feature. The setup_infra_sriov.sh script doesn’t support the -r option for remote IP for host IP on ACC. Host mode is supported for this release as an engineering preview.</p></li>
<li><p>Max supported CDQ interfaces are 254 as max vport for host. The default max vport in the cdq use case cp_init file has been provided as 50 which can be configured.</p></li>
<li><p>Service Load Balancing for TCP has few random session resets. Known issue and bugfix to be available in a future minor release.</p></li>
</ul>
</section>
</section>
<section id="ipdk-23-07">
<h2>IPDK 23.07<a class="headerlink" href="#ipdk-23-07" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>This is the first release of K8s-Infra-Offload recipe that supports E2100
and DPDK targets.</p></li>
</ul>
<section id="highlights">
<h3>Highlights<a class="headerlink" href="#highlights" title="Permalink to this heading"></a></h3>
<section id="e2100-target">
<h4>E2100 Target<a class="headerlink" href="#e2100-target" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Support for Kubernetes Container Network Interface (CNI) to deploy pods and
enable pod-to-pod connectivity on a P4 target using hardware device interfaces.</p></li>
<li><p>Use of internal gateway with dummy MAC to enable layer-3 connectivity on the same node.</p></li>
<li><p>Support for dynamic Subfunctions on E2100.
Subfunction is a lightweight function that has a parent PCI function on which it is
deployed. It is created and deployed in a unit of 1. Unlike SRIOV VFs, a subfunction
doesn’t require its own PCI virtual function. A subfunction communicates with the
hardware through the parent PCI function.</p></li>
<li><p>Infra Manager build support on ARM cores.</p></li>
</ul>
</section>
<section id="dpdk-target">
<h4>DPDK Target<a class="headerlink" href="#dpdk-target" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Support for internal gateway with dummy MAC to enable layer-3 connectivity on the
same node.</p></li>
<li><p>service of type=ClusterIP support.
Service Load Balancing within the node to allow multiple pods on same node to
act as end points providing any application service.</p></li>
<li><p>Bi-directional Auto Learning and Flow Pinning (a.k.a Connection Tracking),
used with load balancing, to allow consistent end point pod selection, once it
has been selected for the first packet.</p></li>
<li><p>DNS service provided by Core DNS pods to other pods.</p></li>
</ul>
</section>
</section>
<section id="common-changes">
<h3>Common Changes<a class="headerlink" href="#common-changes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Makefile target to support tls-secrets and certificate generation</p></li>
<li><p>Automatated build &amp; integration test on each commit</p></li>
<li><p>Felix integration and communication with Infrastructure Offload Components.</p></li>
<li><p>Addition of DB to store state information.</p></li>
<li><p>Support for building K8s Offload Recipe for Rocky Linux 9.1</p></li>
<li><p>Support for Go version 1.20.5</p></li>
<li><p>Support for logging per feature in components</p></li>
<li><p>Configurable MTU using config file</p></li>
</ul>
</section>
<section id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>“make undeploy” fails as a non-root user</p></li>
<li><p>Unable to deploy services after deploy/undeploy a few times</p></li>
<li><p>Infra manager restarts on sending “Empty CNI Add request”</p></li>
<li><p>Infra manager restarts on running anamoly test cases on fuzz testing using
defensics</p></li>
<li><p>Persistent /var/log/inframanager.log is not deleted after “make undeploy”</p></li>
<li><p>conf and few other params in “inframanager/config.yaml” are not used,
should be removed from input file</p></li>
<li><p>Unable to create pods after add/delete a few times</p></li>
<li><p>Inframanger restarts/crashes with “panic: runtime error</p></li>
<li><p>inframanager coming to running state after corrupting inframanager-server-ca.crt</p></li>
<li><p>dump flow-entries is not decrementing after deleting the test pods</p></li>
<li><p>Setup infra fixes for vfio driver bind</p></li>
</ul>
</section>
<section id="known-issues">
<h3>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>This release does not support multi-tenant or multi-node deployments. At
present, the underlying IPDK networking recipe needs to be run on bare metal
on host CPU cores. The entire node, used for deployment, is assumed to be a
trusted zone. However, gRPC/gNMI channels for communications are still
secured using TLS.</p></li>
<li><p>E2100 feature set is limited to pod-to-pod connectivity.</p></li>
<li><p>Incomplete integration for Network Policies.</p></li>
<li><p>Infra agent fails to come up if interface name is not correct</p></li>
<li><p>Less than expected number of PODs are in Running state</p></li>
<li><p>Infrap4d is not started by create_interfaces.sh script due to incorrect
BDF in es2k_skip_p4.conf</p></li>
<li><p>Inframanger crashes with error on sending invalid grpc messages from
Defensics for fuzz testing</p></li>
<li><p>Script create_interfaces.sh should report the status of the actions performed</p></li>
<li><p>Inframanager log level setting and some cleanup</p></li>
<li><p>Need support to set log level for all modules under Inframanager
from the config setting</p></li>
<li><p>Split mode feature where manager runs on es2k is experimental</p></li>
</ul>
</section>
<section id="coming-attractions">
<h3>Coming Attractions<a class="headerlink" href="#coming-attractions" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[E2100]</span></code> Support for Service and Load balancing.</p></li>
<li><p>Support for Kubernetes Network Policy feature on both targets.</p></li>
<li><p>Support for Calico BGP and basic control plane API interfaces.</p></li>
<li><p>Support for natOutgoing for services with backends outside of the cluster.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[E2100]</span></code> support for Device creation and queue allocation on ARM</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[E2100]</span></code> Infra Manager on ARM support</p></li>
</ul>
</section>
</section>
<section id="installation-and-build-instructions">
<h2>Installation and Build Instructions<a class="headerlink" href="#installation-and-build-instructions" title="Permalink to this heading"></a></h2>
<p>See the following for more information:
- [Kubernetes*, Docker*, and containerd* Installation](k8s-docker-containerd-install.md)
- [Kubernetes* Infrastructure Offload Readme](IPDK_K8s_Recipe_Readme.md)</p>
</section>
<section id="license-notices-and-disclaimers">
<h2>License, Notices, and Disclaimers<a class="headerlink" href="#license-notices-and-disclaimers" title="Permalink to this heading"></a></h2>
<section id="licensing">
<h3>Licensing<a class="headerlink" href="#licensing" title="Permalink to this heading"></a></h3>
<p>For licensing information, see the file “LICENSE” in the root folder of the
repository.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="security/using-tls-certificates.html" class="btn btn-neutral float-left" title="Using TLS Certificates" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Intel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>